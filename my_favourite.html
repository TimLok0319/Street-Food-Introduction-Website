<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Favourite - Penang One Better</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity=
     "sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Luckiest+Guy&family=Oswald:wght@200..700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-xl">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html"><img src="images/brand-logo.png" height="50" width="180"></a>
            <button class="navbar-toggler order-last" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="food_gallery.html">FOOD GALLERY</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">FIND A RESTAURANT</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">MY FAVOURITE</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">QUIZ</a>
                    </li>
                </ul>
                <ul class="navbar-nav" id="nav-auth-section"></ul>
            </div>
        </div>
    </nav>

    <!-- My Favourite Section -->
    <main>
        <section class="favourite-section" style="background-color: #FEFAE0; padding: 50px 0;">
            <div class="container">
                <div class="text-center mb-5">
                    <h1 class="display-4 fw-bold text-dark">MY FAVOURITE FOODS</h1>
                    <p class="lead">Your personal collection of delicious Penang street foods</p>

                    <!-- Daily Quote Widget -->
                    <div class="quote-widget mb-4" id="quote-widget" style="display: none;">
                        <div class="card mx-auto" style="max-width: 600px;">
                            <div class="card-body text-center">
                                <h6 class="card-title mb-3">üçΩÔ∏è Food Quote of the Day</h6>
                                <blockquote class="blockquote mb-3">
                                    <p id="daily-quote" class="mb-0 fst-italic">"Loading inspirational quote..."</p>
                                </blockquote>
                                <footer class="blockquote-footer">
                                    <cite title="Source" id="quote-author">Food Lover</cite>
                                </footer>
                                <button class="btn btn-outline-success btn-sm mt-2" id="new-quote-btn">
                                    <i class="bi bi-arrow-clockwise me-1"></i>New Quote
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-3">
                        <span class="badge bg-danger fs-6 me-2">‚ù§Ô∏è Your Favourites</span>
                        <span class="badge bg-success fs-6 me-2">üá≤üáæ Penang Specials</span>
                        <span class="badge bg-info fs-6">üìå Saved for Later</span>
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="row mb-5">
                    <div class="col-md-4 mb-3">
                        <div class="card text-center h-100">
                            <div class="card-body">
                                <i class="bi bi-heart-fill text-danger" style="font-size: 2rem;"></i>
                                <h4 class="card-title mt-2" id="total-favourites">0</h4>
                                <p class="card-text">Total Favourites</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card text-center h-100">
                            <div class="card-body">
                                <i class="bi bi-star-fill text-warning" style="font-size: 2rem;"></i>
                                <h4 class="card-title mt-2" id="avg-rating">0.0</h4>
                                <p class="card-text">Average Rating</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card text-center h-100">
                            <div class="card-body">
                                <i class="bi bi-grid-3x3-gap-fill text-success" style="font-size: 2rem;"></i>
                                <h4 class="card-title mt-2" id="categories-count">0</h4>
                                <p class="card-text">Different Categories</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Filter and Actions -->
                <div class="row mb-4">
                    <div class="col-md-8 mb-3">
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-search"></i></span>
                            <input type="text" class="form-control" id="search-favourites" placeholder="Search your favourite foods...">
                            <button class="btn btn-success" type="button" id="search-btn">Search</button>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <select class="form-select" id="filter-category">
                            <option value="all">All Categories</option>
                            <option value="noodles">Noodles</option>
                            <option value="rice">Rice Dishes</option>
                            <option value="desserts">Desserts</option>
                            <option value="drinks">Drinks</option>
                            <option value="snacks">Snacks</option>
                        </select>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="text-center mb-4">
                    <button class="btn btn-outline-success me-2" id="clear-all-btn">
                        <i class="bi bi-trash me-2"></i>Clear All Favourites
                    </button>
                    <button class="btn btn-success me-2" id="share-favourites-btn">
                        <i class="bi bi-share me-2"></i>Share My Favourites
                    </button>
                    <a href="food_gallery.html" class="btn btn-primary">
                        <i class="bi bi-plus-circle me-2"></i>Add More Foods
                    </a>
                </div>

                <!-- Favourites Grid -->
                <div id="favourites-container" class="row">
                    <!-- Favourite foods will be loaded here -->
                </div>

                <!-- Empty State -->
                <div id="empty-favourites" class="text-center py-5" style="display: none;">
                    <i class="bi bi-heart text-muted" style="font-size: 6rem;"></i>
                    <h3 class="mt-3 text-muted">No Favourite Foods Yet</h3>
                    <p class="text-muted mb-4">Start exploring and add your favourite Penang foods to see them here!</p>
                    <a href="food_gallery.html" class="btn btn-success btn-lg">
                        <i class="bi bi-search me-2"></i>Explore Penang Foods
                    </a>
                </div>

                <!-- No Search Results -->
                <div id="no-search-results" class="text-center py-5" style="display: none;">
                    <i class="bi bi-search text-muted" style="font-size: 4rem;"></i>
                    <h3 class="mt-3 text-muted">No Matching Favourites Found</h3>
                    <p class="text-muted">Try a different search term or category filter</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Food Details Modal -->
    <div class="modal fade" id="foodModal" tabindex="-1" aria-labelledby="foodModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="foodModalLabel">Food Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modal-content">
                    <!-- Dynamic content will be loaded here -->
                </div>
                <div class="modal-footer">
                    <div class="share-buttons">
                        <button type="button" class="btn btn-success" id="share-whatsapp">
                            <i class="bi bi-whatsapp"></i> WhatsApp
                        </button>
                        <button type="button" class="btn btn-info text-white" id="share-twitter">
                            <i class="bi bi-twitter"></i> Twitter
                        </button>
                        <button type="button" class="btn btn-warning text-dark" id="copy-link">
                            <i class="bi bi-link-45deg"></i> Copy Link
                        </button>
                    </div>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer text-center text-white py-4">
        <div class="container">
            <p class="footer-text">¬© 2025 Penang One Better. All rights reserved.</p>
            <div class="mt-2">
                <a href="#" target="_blank" rel="noopener noreferrer" class="text-white mx-2"><i class="bi bi-facebook"></i></a>
                <a href="#" target="_blank" rel="noopener noreferrer" class="text-white mx-2"><i class="bi bi-whatsapp"></i></a>
                <a href="#" target="_blank" rel="noopener noreferrer" class="text-white mx-2"><i class="bi bi-instagram"></i></a>
                <a href="https://github.com/TimLok0319/Street-Food-Introduction-Website" target="_blank" rel="noopener noreferrer" class="text-white mx-2"><i class="bi bi-github"></i></a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Global variables
        let favouriteFoods = [];
        let displayedFavourites = [];
        let currentFood = null;

        $(document).ready(function () {
            loadFavourites();
            updateStatistics();
            loadDailyQuote();

            // Event handlers
            $('#search-btn').click(performSearch);
            $('#search-favourites').keypress(function (e) {
                if (e.which === 13) performSearch();
            });

            $('#filter-category').change(function () {
                filterByCategory($(this).val());
            });

            $('#clear-all-btn').click(clearAllFavourites);
            $('#share-favourites-btn').click(shareFavourites);

            // Modal event handlers
            $('#share-whatsapp').click(shareOnWhatsApp);
            $('#share-twitter').click(shareOnTwitter);
            $('#copy-link').click(copyLink);

            // Quote widget handler
            $('#new-quote-btn').click(loadDailyQuote);
        });

        function loadFavourites() {
            favouriteFoods = JSON.parse(localStorage.getItem('penangFavorites') || '[]');
            displayedFavourites = [...favouriteFoods];
            displayFavourites(displayedFavourites);
        }

        function displayFavourites(foods) {
            const container = $('#favourites-container');
            container.empty();

            if (foods.length === 0) {
                if (favouriteFoods.length === 0) {
                    $('#empty-favourites').show();
                    $('#no-search-results').hide();
                } else {
                    $('#empty-favourites').hide();
                    $('#no-search-results').show();
                }
                return;
            }

            $('#empty-favourites').hide();
            $('#no-search-results').hide();

            foods.forEach(food => {
                const ratingStars = generateRatingStars(food.rating);

                const foodCard = `
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="card h-100 shadow-sm favourite-card" data-food-id="${food.id}">
                                <div class="position-relative">
                                    <img src="${food.image}" class="card-img-top" alt="${food.name}"
                                         style="height: 200px; object-fit: cover;"
                                         onerror="this.src='https://via.placeholder.com/300x200?text=Penang+Food'">
                                    <div class="position-absolute top-0 start-0 m-2">
                                        <span class="badge bg-danger">‚ù§Ô∏è Favourite</span>
                                    </div>
                                    <div class="position-absolute top-0 end-0 m-2">
                                        <button class="btn btn-sm btn-outline-light remove-favourite-btn" data-food-id="${food.id}" title="Remove from favourites">
                                            <i class="bi bi-heart-fill text-danger"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title">${food.name}</h5>
                                    <p class="card-text flex-grow-1">${food.description.substring(0, 120)}...</p>
                                    <div class="mt-auto">
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <div class="rating">
                                                ${ratingStars}
                                                <small class="text-muted ms-1">(${food.rating})</small>
                                            </div>
                                            <small class="text-muted">${food.calories} cal</small>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span class="badge bg-warning text-dark">${food.category}</span>
                                            <small class="text-muted">${food.calories} cal</small>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-success fw-bold">${food.price_range}</small>
                                            <small class="text-muted">üìç Penang</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="row g-2">
                                        <div class="col-8">
                                            <button class="btn btn-success btn-sm w-100 view-details-btn" data-food-id="${food.id}">
                                                <i class="bi bi-eye me-1"></i>View Details
                                            </button>
                                        </div>
                                        <div class="col-4">
                                            <button class="btn btn-outline-danger btn-sm w-100 remove-favourite-btn" data-food-id="${food.id}" title="Remove">
                                                <i class="bi bi-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                container.append(foodCard);
            });

            // Add click handlers
            $('.view-details-btn').click(function () {
                const foodId = $(this).data('food-id');
                showFoodDetails(foodId);
            });

            $('.remove-favourite-btn').click(function (e) {
                e.stopPropagation();
                const foodId = $(this).data('food-id');
                removeFavourite(foodId);
            });
        }

        function showFoodDetails(foodId) {
            const food = favouriteFoods.find(f => f.id === foodId);
            if (!food) return;

            currentFood = food;
            renderFoodModal(food);
        }

        function renderFoodModal(food) {
            const ratingStars = generateRatingStars(food.rating);

            const modalContent = `
                    <div class="row">
                        <div class="col-md-6">
                            <img src="${food.image}" class="img-fluid rounded shadow" alt="${food.name}"
                                 onerror="this.src='https://via.placeholder.com/400x300?text=Penang+Food'">
                            <div class="mt-3 text-center">
                                <div class="rating-large">
                                    ${ratingStars}
                                    <span class="fs-5 fw-bold ms-2">${food.rating}/5</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h3>${food.name}</h3>
                            <div class="mb-3">
                                <span class="badge bg-danger me-2">‚ù§Ô∏è Your Favourite</span>
                                <span class="badge bg-warning text-dark me-2">${food.category}</span>
                                <span class="badge bg-success">Authentic Local</span>
                            </div>
                            <p class="lead">${food.description}</p>

                            <div class="row mb-3">
                                <div class="col-12 mb-3">
                                    <strong><i class="bi bi-clock-history text-primary me-1"></i>History:</strong><br>
                                    <small>${food.history || 'No history available'}</small>
                                </div>
                                <div class="col-12 mb-3">
                                    <strong><i class="bi bi-lightbulb text-warning me-1"></i>Facts:</strong><br>
                                    <small>${food.facts || 'No facts available'}</small>
                                </div>
                                <div class="col-12 mb-3">
                                    <strong><i class="bi bi-people text-success me-1"></i>Culture:</strong><br>
                                    <small>${food.culture || 'No culture information available'}</small>
                                </div>
                                <div class="col-6">
                                    <strong><i class="bi bi-fire me-1"></i>Calories:</strong> ${food.calories} per serving
                                </div>
                                <div class="col-6">
                                    <strong><i class="bi bi-currency-dollar me-1"></i>Price:</strong> ${food.price_range}
                                </div>
                            </div>

                            ${food.best_locations ? `
                                <div class="mb-3">
                                    <strong><i class="bi bi-geo-alt me-1"></i>Best Locations:</strong><br>
                                    ${food.best_locations.map(location => `<span class="badge bg-light text-dark me-1">${location}</span>`).join('')}
                                </div>
                            ` : ''}

                            <hr>
                            <h6><i class="bi bi-list-check me-2"></i>Ingredients:</h6>
                            <div class="ingredients-list" style="max-height: 200px; overflow-y: auto;">
                                ${food.ingredients.map((ing, index) => `
                                    <div class="ingredient-item mb-1">
                                        <span class="badge bg-light text-dark me-2">${index + 1}</span>
                                        ${ing}
                                    </div>
                                `).join('')}
                            </div>

                            <div class="mt-3">
                                <button class="btn btn-primary btn-sm me-2" onclick="goToFoodDetails('${food.id}')">
                                    <i class="bi bi-arrow-right me-1"></i>Full Details Page
                                </button>
                                <button class="btn btn-outline-danger btn-sm" onclick="removeFavourite('${food.id}')">
                                    <i class="bi bi-heart-fill me-1"></i>Remove from Favourites
                                </button>
                            </div>
                        </div>
                    </div>
                `;

            $('#modal-content').html(modalContent);
            $('#foodModalLabel').text(food.name);

            const modal = new bootstrap.Modal(document.getElementById('foodModal'));
            modal.show();
        }

        function goToFoodDetails(foodId) {
            const food = favouriteFoods.find(f => f.id === foodId);
            if (food) {
                localStorage.setItem('selectedFood', JSON.stringify(food));
                localStorage.setItem('allFoods', JSON.stringify(favouriteFoods));
                window.location.href = 'food_details.html';
            }
        }

        function removeFavourite(foodId) {
            favouriteFoods = favouriteFoods.filter(food => food.id !== foodId);
            localStorage.setItem('penangFavorites', JSON.stringify(favouriteFoods));

            loadFavourites();
            updateStatistics();

            showToast('Removed from Favourites', 'Food has been removed from your favourites.', 'success');
        }

        function clearAllFavourites() {
            if (favouriteFoods.length === 0) {
                showToast('No Favourites', 'You don\'t have any favourite foods to clear.', 'info');
                return;
            }

            if (confirm('Are you sure you want to remove all favourite foods? This action cannot be undone.')) {
                localStorage.removeItem('penangFavorites');
                favouriteFoods = [];
                displayedFavourites = [];
                displayFavourites(displayedFavourites);
                updateStatistics();
                showToast('All Favourites Cleared', 'All favourite foods have been removed.', 'success');
            }
        }

        function shareFavourites() {
            if (favouriteFoods.length === 0) {
                showToast('No Favourites', 'You don\'t have any favourite foods to share.', 'info');
                return;
            }

            const foodNames = favouriteFoods.map(food => food.name).join(', ');
            const text = encodeURIComponent(`Check out my favourite Penang foods: ${foodNames}! üçú‚ù§Ô∏è`);
            window.open(`https://wa.me/?text=${text}`, '_blank');
        }

        function performSearch() {
            const searchTerm = $('#search-favourites').val().trim().toLowerCase();
            const selectedCategory = $('#filter-category').val();

            let filtered = [...favouriteFoods];

            // Apply category filter
            if (selectedCategory !== 'all') {
                filtered = filtered.filter(food => food.category === selectedCategory);
            }

            // Apply search filter
            if (searchTerm) {
                filtered = filtered.filter(food =>
                    food.name.toLowerCase().includes(searchTerm) ||
                    food.description.toLowerCase().includes(searchTerm) ||
                    food.ingredients.some(ing => ing.toLowerCase().includes(searchTerm))
                );
            }

            displayedFavourites = filtered;
            displayFavourites(displayedFavourites);
        }

        function filterByCategory(category) {
            const searchTerm = $('#search-favourites').val().trim().toLowerCase();

            let filtered = [...favouriteFoods];

            // Apply category filter
            if (category !== 'all') {
                filtered = filtered.filter(food => food.category === category);
            }

            // Apply search filter if exists
            if (searchTerm) {
                filtered = filtered.filter(food =>
                    food.name.toLowerCase().includes(searchTerm) ||
                    food.description.toLowerCase().includes(searchTerm) ||
                    food.ingredients.some(ing => ing.toLowerCase().includes(searchTerm))
                );
            }

            displayedFavourites = filtered;
            displayFavourites(displayedFavourites);
        }

        function updateStatistics() {
            const totalFavs = favouriteFoods.length;
            $('#total-favourites').text(totalFavs);

            if (totalFavs > 0) {
                // Calculate average rating
                const avgRating = (favouriteFoods.reduce((sum, food) => sum + food.rating, 0) / totalFavs).toFixed(1);
                $('#avg-rating').text(avgRating);

                // Count unique categories
                const categories = new Set(favouriteFoods.map(food => food.category));
                $('#categories-count').text(categories.size);
            } else {
                $('#avg-rating').text('0.0');
                $('#categories-count').text('0');
            }
        }

        // Utility functions
        function generateRatingStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);

            return '‚òÖ'.repeat(fullStars) +
                (hasHalfStar ? '‚òÜ' : '') +
                '‚òÜ'.repeat(emptyStars);
        }

        // Share functions
        function shareOnWhatsApp() {
            if (currentFood) {
                const text = encodeURIComponent(`Check out this delicious ${currentFood.name} from my Penang favourites! üçú‚ù§Ô∏è`);
                window.open(`https://wa.me/?text=${text}`, '_blank');
            }
        }

        function shareOnTwitter() {
            if (currentFood) {
                const text = encodeURIComponent(`Check out this delicious ${currentFood.name} from my Penang favourites! üçú‚ù§Ô∏è`);
                window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank');
            }
        }

        function copyLink() {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(window.location.href).then(function () {
                    showToast('Link Copied!', 'The page link has been copied to your clipboard.', 'success');
                });
            } else {
                showToast('Copy Failed', 'Could not copy the link.', 'danger');
            }
        }

        function showToast(title, message, type) {
            const toastHtml = `
                    <div class="toast align-items-center text-white bg-${type} border-0" role="alert" aria-live="assertive" aria-atomic="true">
                        <div class="d-flex">
                            <div class="toast-body">
                                <strong>${title}</strong><br>${message}
                            </div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                        </div>
                    </div>
                `;

            if (!$('#toast-container').length) {
                $('body').append('<div id="toast-container" class="toast-container position-fixed top-0 end-0 p-3"></div>');
            }

            $('#toast-container').append(toastHtml);
            const toastElement = $('#toast-container .toast:last')[0];
            const toast = new bootstrap.Toast(toastElement);
            toast.show();

            $(toastElement).on('hidden.bs.toast', function () {
                $(this).remove();
            });
        }

        // Quote API Integration - Using jQuery AJAX
        function loadDailyQuote() {
            // Using jQuery.ajax() for RESTful API call
            $.ajax({
                url: 'https://api.quotable.io/random',
                method: 'GET', // RESTful GET method
                data: {
                    tags: 'food'
                },
                dataType: 'json',
                timeout: 8000, // 8 second timeout
                success: function (data) {
                    console.log('Quote API Success:', data);
                    displayQuote(data.content, data.author);
                },
                error: function (xhr, status, error) {
                    console.log('Quote API Error:', status, error);
                    displayFallbackQuote();
                },
                beforeSend: function () {
                    // Show loading state
                    $('#daily-quote').text('Loading inspirational quote...');
                    $('#quote-author').text('Please wait...');
                },
                complete: function () {
                    console.log('Quote API request completed');
                }
            });
        }

        // Alternative jQuery RESTful methods demonstration
        function loadRandomQuoteAlternative() {
            // Using jQuery.get() - shorthand for GET requests
            $.get('https://api.quotable.io/random', {
                tags: 'food',
                minLength: 50
            })
                .done(function (data) {
                    displayQuote(data.content, data.author);
                })
                .fail(function () {
                    displayFallbackQuote();
                });
        }

        // RESTful API call using jQuery.getJSON()
        function loadQuoteWithGetJSON() {
            $.getJSON('https://api.quotable.io/random?tags=food')
                .done(function (data) {
                    displayQuote(data.content, data.author);
                })
                .fail(function () {
                    displayFallbackQuote();
                });
        }

        // Example of other RESTful methods that could be used
        function demonstrateRestfulMethods() {
            // POST request example (if we had an API that accepts POST)
            /*
            $.ajax({
                url: 'https://api.example.com/favorites',
                method: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({
                    foodId: 'penang001',
                    userId: 'user123'
                }),
                success: function(response) {
                    console.log('Added to favorites:', response);
                }
            });
            */

            // PUT request example (for updating data)
            /*
            $.ajax({
                url: 'https://api.example.com/favorites/123',
                method: 'PUT',
                contentType: 'application/json',
                data: JSON.stringify({
                    rating: 5,
                    notes: 'Delicious!'
                }),
                success: function(response) {
                    console.log('Updated favorite:', response);
                }
            });
            */

            // DELETE request example (for removing data)
            /*
            $.ajax({
                url: 'https://api.example.com/favorites/123',
                method: 'DELETE',
                success: function(response) {
                    console.log('Removed from favorites:', response);
                }
            });
            */
        }

        function displayQuote(quote, author) {
            $('#daily-quote').text(`"${quote}"`);
            $('#quote-author').text(author);
            $('#quote-widget').fadeIn();
        }

        function displayFallbackQuote() {
            const foodQuotes = [
                { quote: "Food is the ingredient that binds us together.", author: "Unknown" },
                { quote: "Life is too short for bad food.", author: "Food Enthusiast" },
                { quote: "Cooking is love made visible.", author: "Unknown" },
                { quote: "Food is our common ground, a universal experience.", author: "James Beard" },
                { quote: "The only thing I like better than talking about food is eating.", author: "John Walters" },
                { quote: "Food brings people together on many different levels.", author: "Unknown" },
                { quote: "Street food is the heart of a city's culture.", author: "Food Explorer" },
                { quote: "Good food is the foundation of genuine happiness.", author: "Auguste Escoffier" }
            ];

            const randomQuote = foodQuotes[Math.floor(Math.random() * foodQuotes.length)];
            displayQuote(randomQuote.quote, randomQuote.author);
        }

        // Custom CSS for enhanced styling
        $('<style>')
            .prop('type', 'text/css')
            .html(`
                    .favourite-card {
                        transition: transform 0.3s ease, box-shadow 0.3s ease;
                        cursor: pointer;
                    }
                    .favourite-card:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
                    }
                    .rating {
                        color: #ffc107;
                    }
                    .rating-large {
                        font-size: 1.5rem;
                        color: #ffc107;
                    }
                    .ingredient-item {
                        padding: 5px 0;
                        border-bottom: 1px solid #eee;
                    }
                    .ingredient-item:last-child {
                        border-bottom: none;
                    }
                    .ingredients-list {
                        background-color: #f8f9fa;
                        padding: 15px;
                        border-radius: 8px;
                        border: 1px solid #dee2e6;
                    }
                    .remove-favourite-btn {
                        transition: all 0.3s ease;
                    }
                    .remove-favourite-btn:hover {
                        transform: scale(1.1);
                    }
                    @media (max-width: 768px) {
                        .btn-group {
                            flex-direction: column;
                            width: 100%;
                        }
                        .btn-group .btn {
                            margin-bottom: 5px;
                        }
                    }
                `)
            .appendTo('head');
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const navAuthSection = document.getElementById('nav-auth-section');

            const getUsers = () => JSON.parse(localStorage.getItem('users')) || [];
            const getLoggedInUser = () => localStorage.getItem('loggedInUser');

            const updateNavbar = () => {
                const loggedInUsername = getLoggedInUser();
                navAuthSection.innerHTML = '';

                if (loggedInUsername) {

                    const users = getUsers();
                    const user = users.find(u => u.username === loggedInUsername);
                    const displayName = user ? (user.nickname || user.username) : loggedInUsername;
                    const avatarSrc = user ? user.avatar : 'images/user-logo.png';

                    navAuthSection.innerHTML = `
                            <li class="nav-item">
                                <a id="nav-profile-link" class="nav-link d-flex align-items-center" href="account.html" title="View Profile">
                                    ${displayName.toUpperCase()}
                                    <img src="${avatarSrc}" alt="User Avatar" class="ms-2" height="35" width="35" style="border-radius: 50%; object-fit: cover;">
                                </a>
                            </li>
                        `;
                } else {

                    navAuthSection.innerHTML = `
                            <li class="nav-item">
                                <a id="nav-signin-link" class="account nav-link" href="account.html">
                                    SIGN IN <img class="user-icon" src="images/user-logo.png" height="35" width="35">
                                </a>
                            </li>
                        `;
                }
            };

            // update navbat
            updateNavbar();
        });
    </script>

</body>
</html>