<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penang One Better - Penang Street Food</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity=
     "sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Luckiest+Guy&family=Oswald:wght@200..700&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-xl">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html"><img src="images/brand-logo.png" height="50" width="180"></a>
            <button class="navbar-toggler order-last" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="food_gallery.html">FOOD GALLERY</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="find_restaurant.html">FIND A RESTAURANT</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="my_favourite.html">MY FAVOURITE</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="quiz.html">QUIZ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">ABOUT</a>
                    </li>

                    
                </ul>
                <ul class="navbar-nav" id="nav-auth-section"></ul>
            </div>
        </div>
    </nav>

    <!-- Penang Street Food Section -->
    <main>
        <section class="foods-section" style="background-color: #FEFAE0; padding: 50px 0;">
            <div class="container">
                <div class="text-center mb-5">
                    <h1 class="display-4 fw-bold text-dark">PENANG STREET FOOD</h1>
                    <p class="lead">Discover authentic Penang street food and Malaysian cuisine</p>

                    <!-- Weather Widget -->
                    <div class="weather-widget mb-4" id="weather-widget" style="display: none;">
                        <div class="card mx-auto" style="max-width: 400px;">
                            <div class="card-body text-center">
                                <h6 class="card-title mb-2">Current Weather in Penang</h6>
                                <div class="d-flex justify-content-center align-items-center">
                                    <img id="weather-icon" src="" alt="Weather" style="width: 50px; height: 50px;">
                                    <div class="ms-3">
                                        <h4 id="weather-temp" class="mb-0">--¬∞C</h4>
                                        <small id="weather-desc" class="text-muted">Loading...</small>
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">
                                        Feels like <span id="weather-feels">--</span>¬∞C |
                                        Humidity: <span id="weather-humidity">--%</span>
                                    </small>
                                </div>
                                <div id="weather-recommendation" class="mt-2 alert alert-info py-2 mb-0" style="display: none;">
                                    <small><strong>Food Suggestion:</strong> <span id="food-suggestion"></span></small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-3">
                        <span class="badge bg-success fs-6 me-2">üá≤üáæ Authentic Malaysian</span>
                        <span class="badge bg-info fs-6 me-2">üçú Street Food</span>
                        <span class="badge bg-warning text-dark fs-6">üìç Penang Specials</span>
                    </div>
                </div>

                <!-- Search and Filter Controls -->
                <div class="row mb-4">
                    <div class="col-md-8 mb-3">
                        <div class="input-group">
                            <span class="input-group-text"><i class="bi bi-search"></i></span>
                            <input type="text" class="form-control" id="search-input" placeholder="Search Penang foods (e.g., 'laksa', 'char kway teow', 'cendol')...">
                            <button class="btn btn-success" type="button" id="search-btn">Search</button>
                            <button class="btn btn-outline-danger" type="button" id="clear-search-btn">Clear</button>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <select class="form-select" id="sort-select">
                            <option value="default">Sort by</option>
                            <option value="name-asc">Name (A-Z)</option>
                            <option value="name-desc">Name (Z-A)</option>
                            <option value="rating-desc">Rating (High-Low)</option>
                            <option value="rating-asc">Rating (Low-High)</option>
                        </select>
                    </div>
                </div>

                <!-- Penang Food Categories -->
                <div class="text-center mb-4">
                    <h5 class="mb-3">Browse by Category:</h5>
                    <div class="btn-group flex-wrap" role="group">
                        <button type="button" class="btn btn-outline-success category-btn active" data-category="all">All Foods</button>
                        <button type="button" class="btn btn-outline-success category-btn" data-category="noodles">Noodles</button>
                        <button type="button" class="btn btn-outline-success category-btn" data-category="rice">Rice Dishes</button>
                        <button type="button" class="btn btn-outline-success category-btn" data-category="desserts">Desserts</button>
                        <button type="button" class="btn btn-outline-success category-btn" data-category="drinks">Drinks</button>
                        <button type="button" class="btn btn-outline-success category-btn" data-category="snacks">Snacks</button>
                    </div>
                </div>

                <!-- Loading Spinner -->
                <div id="loading" class="text-center" style="display: none;">
                    <div class="spinner-border text-success" role="status" style="width: 3rem; height: 3rem;">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-3">Loading Penang foods...</p>
                </div>

                <!-- Foods Grid -->
                <div id="foods-container" class="row">
                    <!-- Foods will be loaded here -->
                </div>

                <!-- No Results Message -->
                <div id="no-results" class="text-center py-5" style="display: none;">
                    <i class="bi bi-search text-muted" style="font-size: 4rem;"></i>
                    <h3 class="mt-3 text-muted">No Penang foods found</h3>
                    <p class="text-muted">Try searching for popular foods like "laksa", "char kway teow", or "cendol"</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer text-center text-white py-4">
        <div class="container">
            <p class="footer-text">¬© 2025 Penang One Better. All rights reserved.</p>
            <div class="mt-2">
                <a href="#" target="_blank" rel="noopener noreferrer" class="text-white mx-2"><i class="bi bi-facebook"></i></a>
                <a href="#" target="_blank" rel="noopener noreferrer" class="text-white mx-2"><i class="bi bi-whatsapp"></i></a>
                <a href="#" target="_blank" rel="noopener noreferrer" class="text-white mx-2"><i class="bi bi-instagram"></i></a>
                <a href="https://github.com/TimLok0319/Street-Food-Introduction-Website" target="_blank" rel="noopener noreferrer" class="text-white mx-2"><i class="bi bi-github"></i></a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Global variables
        let allFoods = [];
        let displayedFoods = [];
        let currentCategory = 'all';

        // Load local Penang foods from JSON file
        async function loadPenangFoods() {
            try {
                const response = await $.getJSON('foods-api.json');
                return response.penang_street_foods || [];
            } catch (error) {
                console.log('Loading from local data...');
                return getLocalPenangFoods();
            }
        }

        // Local Penang foods database (fallback)
        function getLocalPenangFoods() {
            return [
                {
                    id: "penang001",
                    name: "Penang Asam Laksa",
                    image: "images/Penang-asam-laksa-in-a-bowl.jpg",
                    description: "UNESCO recognized tangy and spicy fish-based noodle soup with tamarind, fresh herbs, and aromatic spices. The most famous Penang street food.",
                    ingredients: ["Rice noodles", "Mackerel fish", "Tamarind paste", "Galangal", "Lemongrass", "Dried chilies", "Shallots", "Vietnamese mint", "Cucumber", "Pineapple", "Red onions", "Prawn paste"],
                    category: "noodles",
                    rating: 4.8,
                    calories: 320,
                    price_range: "RM 6 - 12",
                    best_locations: ["Air Itam Market", "Penang Road Famous Laksa", "Joo Hooi Cafe"],
                    history: "Asam Laksa originated from the Peranakan community in Penang, blending Malay and Chinese culinary traditions dating back to the 15th century.",
                    facts: "Ranked 7th in CNN's World's 50 Most Delicious Foods list. The sourness comes from tamarind, giving it the name 'asam' meaning sour in Malay.",
                    culture: "Often eaten as breakfast or lunch, this dish represents the multicultural harmony of Penang, where different communities contributed ingredients and cooking techniques."
                },
                {
                    id: "penang002",
                    name: "Char Kway Teow",
                    image: "images/Char-kway-teow-for-FP-2.jpg",
                    description: "Penang's signature stir-fried flat rice noodles with prawns, Chinese sausage, bean sprouts, and eggs. Cooked over high heat for that perfect 'wok hei' flavor.",
                    ingredients: ["Fresh flat rice noodles", "Large fresh prawns", "Chinese sausage", "Fresh bean sprouts", "Eggs", "Chinese chives", "Dark soy sauce", "Light soy sauce", "White pepper", "Garlic", "Lard or cooking oil"],
                    category: "noodles",
                    rating: 4.7,
                    calories: 450,
                    price_range: "RM 5 - 10",
                    best_locations: ["Siam Road Char Kway Teow", "Sister Curry Mee", "Duck Egg Char Kway Teow"],
                    history: "Created by Chinese immigrants in the 1800s as an affordable, filling meal for laborers. Originally cooked by street vendors using portable charcoal stoves.",
                    facts: "The secret is 'wok hei' (breath of the wok) - the smoky flavor achieved only through high-heat cooking. Authentic versions use duck eggs and fresh lard.",
                    culture: "Considered the soul food of Penang Chinese community. Each family recipe is passed down through generations, with slight variations making each stall unique."
                },
                {
                    id: "penang003",
                    name: "Penang Hokkien Mee",
                    image: "images/hokkien-mee.png",
                    description: "Rich prawn and pork rib broth served with yellow noodles and rice vermicelli. Topped with prawns, pork slices, hard-boiled eggs, and kangkung.",
                    ingredients: ["Yellow noodles", "Rice vermicelli", "Large prawns", "Pork ribs", "Hard-boiled eggs", "Bean sprouts", "Water spinach", "Fried shallots", "Lime wedges", "Red chilies", "White pepper"],
                    category: "noodles",
                    rating: 4.6,
                    calories: 380,
                    price_range: "RM 6 - 11",
                    best_locations: ["Air Itam Market", "New Lane Hawker Centre", "Lorong Selamat"],
                    history: "Brought by Hokkien immigrants from Fujian province in the 1920s. The recipe evolved in Penang to include local ingredients like kangkung and local prawns.",
                    facts: "The broth is simmered for hours using prawn shells and pork bones. Real Penang Hokkien Mee is served with a spicy chili paste called 'sambal belacan'.",
                    culture: "A comfort food for the Hokkien community, traditionally enjoyed during family gatherings and celebrations. Each hawker stall guards their secret broth recipe jealously."
                },
                {
                    id: "penang004",
                    name: "Penang Cendol",
                    image: "images/Penang-cendol.jpg",
                    description: "Refreshing dessert with green rice flour jelly strips, rich coconut milk, gula melaka (palm sugar), and shaved ice. Perfect for Penang's hot weather.",
                    ingredients: ["Green rice flour jelly", "Fresh coconut milk", "Gula melaka", "Shaved ice", "Red beans", "Sweet corn", "Durian (seasonal)"],
                    category: "desserts",
                    rating: 4.5,
                    calories: 180,
                    price_range: "RM 2 - 5",
                    best_locations: ["Penang Road Famous Cendol", "Kek Seng Coffee Shop", "Ais Kacang Penang Road"],
                    history: "Originated from Java and brought to Penang by Javanese traders in the 1800s. The green color comes from pandan leaves, a traditional Southeast Asian flavoring.",
                    facts: "Penang's version is unique for using gula melaka (coconut palm sugar) instead of regular sugar, giving it a distinctive caramel-like sweetness.",
                    culture: "A beloved afternoon treat that brings people together. Street vendors traditionally call out 'Cendol! Cendol!' while ringing a bell to attract customers."
                },
                {
                    id: "penang005",
                    name: "Penang Rojak",
                    image: "images/Penang-Rojak.jpg",
                    description: "Unique fruit and vegetable salad with tangy, spicy dressing. Mixed tableside by the rojak man using wooden paddles for the perfect blend.",
                    ingredients: ["Green mango", "Cucumber", "Bean sprouts", "Firm tofu", "Turnip", "Jicama", "Tamarind paste", "Palm sugar", "Chili paste", "Prawn paste", "Crushed peanuts", "Sesame seeds"],
                    category: "snacks",
                    rating: 4.4,
                    calories: 120,
                    price_range: "RM 3 - 6",
                    best_locations: ["Mamak Rojak Penang Road", "Esplanade Food Centre", "Air Itam Market"],
                    history: "Evolved from Indian influence in the 1900s, combining local fruits with Indian spice knowledge. The word 'rojak' means 'mixture' in Malay.",
                    facts: "The art of rojak making requires skill - vendors use wooden paddles to mix ingredients without bruising the fruits. Each vendor has a secret sauce recipe.",
                    culture: "Represents Malaysia's multicultural society - a harmonious mix of different ingredients. Often enjoyed as a healthy snack during hot afternoons."
                },
                {
                    id: "penang006",
                    name: "Curry Mee",
                    image: "images/Penang-Curry-Mee.jpg",
                    description: "Spicy coconut curry noodle soup with yellow noodles, rice vermicelli, prawns, cockles, tofu puffs, and bean sprouts. Rich, creamy, and aromatic.",
                    ingredients: ["Yellow noodles", "Rice vermicelli", "Coconut milk", "Curry paste", "Fresh prawns", "Fresh cockles", "Tofu puffs", "Bean sprouts", "Long beans", "Fish cakes", "Hard-boiled eggs", "Fried shallots"],
                    category: "noodles",
                    rating: 4.3,
                    calories: 450,
                    price_range: "RM 4 - 8",
                    best_locations: ["Air Itam Market", "Sister Curry Mee", "New Lane Hawker Centre"],
                    history: "Created in the 1960s by blending Chinese noodle traditions with Malay curry spices. Reflects the cultural fusion that defines Penang cuisine.",
                    facts: "The curry paste is made fresh daily using over 10 different spices. Penang version is spicier and more coconut-rich than other Malaysian curry noodles.",
                    culture: "A favorite breakfast dish among locals. The communal nature of sharing from the same pot reflects Malaysian values of togetherness and sharing."
                },
                {
                    id: "penang007",
                    name: "Lor Bak (Five Spice Pork Roll)",
                    image: "images/Penang-Loh-Bak.jpg",
                    description: "Seasoned minced pork wrapped in beancurd skin and deep-fried until golden. Served with sweet sauce and pickled vegetables.",
                    ingredients: ["Minced pork", "Five-spice powder", "Beancurd skin", "Water chestnuts", "Light soy sauce", "Dark soy sauce", "Sugar", "White pepper", "Cornstarch", "Sesame oil"],
                    category: "snacks",
                    rating: 4.2,
                    calories: 280,
                    price_range: "RM 3 - 6",
                    best_locations: ["Kimberley Street", "Campbell Street Market", "Lebuh Presgrave"],
                    history: "Introduced by Hokkien immigrants in the early 1900s. Originally a festive food prepared during Chinese New Year and other celebrations.",
                    facts: "The five-spice blend includes star anise, cloves, cinnamon, fennel, and Sichuan peppercorns. Each piece is hand-wrapped with precision.",
                    culture: "Often enjoyed with family during tea time. The preparation is a social activity where family members gather to wrap the lor bak together."
                },
                {
                    id: "penang008",
                    name: "Tau Sar Piah (Mung Bean Pastry)",
                    image: "images/Penang-Tau-Sar-Piah.png",
                    description: "Traditional Penang pastry with flaky crust filled with sweet or salty mung bean paste. Famous souvenir from Penang.",
                    ingredients: ["Plain flour", "Mung bean paste", "Lard or butter", "Sugar", "Salt", "Sesame seeds", "Egg wash"],
                    category: "snacks",
                    rating: 4.1,
                    calories: 220,
                    price_range: "RM 1 - 3 per piece",
                    best_locations: ["Ghee Hiang", "Kek Seng Coffee Shop", "Tambun Biscuits"],
                    history: "Created in the 1930s by Teochew bakers in Penang. Became the most popular souvenir representing Penang's culinary heritage.",
                    facts: "Ghee Hiang bakery is credited with perfecting the recipe. The pastry requires 30 layers of dough to achieve the perfect flakiness.",
                    culture: "Visitors traditionally buy boxes to bring home to family and friends. Represents the gift-giving culture and hospitality of Penang people."
                },
                {
                    id: "penang009",
                    name: "Wan Tan Mee",
                    image: "images/Penang-Wan-Tan-Mee.jpg",
                    description: "Springy egg noodles with char siu (barbecued pork), wontons, and vegetables in light soy sauce dressing.",
                    ingredients: ["Fresh egg noodles", "Wontons", "Char siu pork", "Chinese vegetables", "Light soy sauce", "Dark soy sauce", "Sesame oil", "White pepper", "Fried shallots", "Spring onions"],
                    category: "noodles",
                    rating: 4.0,
                    calories: 350,
                    price_range: "RM 4 - 8",
                    best_locations: ["Lebuh Presgrave", "Campbell Street", "New Lane"],
                    history: "Brought by Cantonese immigrants in the 1920s. The dish evolved in Penang to include local preferences for drier noodles and different seasonings.",
                    facts: "Penang's version is served 'dry' with sauce on the side, unlike Hong Kong style which is soup-based. The noodles are made fresh daily for the perfect texture.",
                    culture: "A staple lunch food for the working class. Represents the adaptability of immigrant communities and how they modified traditional recipes to local tastes."
                },
                {
                    id: "penang010",
                    name: "Apam Balik (Turnover Pancake)",
                    image: "images/Penang-Apam-Balik.jpg",
                    description: "Crispy-edged pancake filled with crushed peanuts, sugar, corn, and butter. A popular evening snack in Penang.",
                    ingredients: ["Rice flour", "Wheat flour", "Coconut milk", "Sugar", "Yeast", "Crushed peanuts", "Sweet corn", "Butter"],
                    category: "snacks",
                    rating: 3.9,
                    calories: 250,
                    price_range: "RM 2 - 4",
                    best_locations: ["Gurney Drive", "Esplanade", "Night markets"],
                    history: "Influenced by Chinese pancake-making techniques but adapted with local ingredients like coconut milk. Popular since the 1950s in Penang.",
                    facts: "The batter must ferment for hours to achieve the right texture. Traditional vendors use large metal molds heated over charcoal fires.",
                    culture: "A nostalgic street food associated with childhood memories. Vendors operate mainly in the evening, creating a warm, familial atmosphere in neighborhoods."
                },
                {
                    id: "penang011",
                    name: "Mee Goreng Mamak",
                    image: "images/Penang-Mee-Goreng-Mamak.webp",
                    description: "Spicy fried yellow noodles with potatoes, tofu, bean sprouts, and egg. A favorite late-night dish at mamak stalls.",
                    ingredients: ["Yellow noodles", "Potatoes", "Firm tofu", "Bean sprouts", "Eggs", "Tomatoes", "Chili sauce", "Tomato sauce", "Soy sauce", "Onions", "Chinese chives"],
                    category: "noodles",
                    rating: 3.8,
                    calories: 420,
                    price_range: "RM 3 - 6",
                    best_locations: ["Hameediyah Restaurant", "Kapitan Restaurant", "Various mamak stalls"],
                    history: "Developed by Indian Muslim immigrants in the 1960s, combining Indian spice techniques with Chinese noodles and local ingredients.",
                    facts: "The distinctive red color comes from tomato and chili sauce. Mamak stalls traditionally stay open 24 hours, making this a popular supper dish.",
                    culture: "Represents the 'mamak culture' - Indian Muslim establishments that serve as social gathering spots for people from all backgrounds, especially late at night."
                },
                {
                    id: "penang012",
                    name: "Pasembur",
                    image: "images/Penang-Pasembur.jpg",
                    description: "Indian-style rojak with fried fritters, vegetables, tofu, and boiled eggs in spicy peanut sauce.",
                    ingredients: ["Mixed vegetables", "Fried fritters", "Tofu", "Hard-boiled eggs", "Cucumbers", "Bean sprouts", "Peanut sauce", "Tamarind water", "Chili paste", "Palm sugar"],
                    category: "snacks",
                    rating: 3.7,
                    calories: 200,
                    price_range: "RM 3 - 5",
                    best_locations: ["Little India", "Lebuh Pasar", "Indian Muslim stalls"],
                    history: "Introduced by Indian Muslim traders in the early 1900s. The name comes from Tamil, meaning 'mixed together' - similar to rojak concept.",
                    facts: "The peanut sauce is the key - made with roasted peanuts, tamarind, and a secret blend of spices that varies by vendor.",
                    culture: "Popular among the Indian Muslim community as an affordable, nutritious meal. Often eaten while standing at roadside stalls, fostering casual social interactions."
                },
                {
                    id: "penang013",
                    name: "Nasi Kandar",
                    image: "images/Penang-Nasi-Kandar.jpg",
                    description: "Penang's famous rice dish served with various curries and side dishes. A must-try local experience.",
                    ingredients: ["Steamed rice", "Curry chicken", "Curry fish", "Curry vegetables", "Papadum", "Pickled vegetables", "Sambal"],
                    category: "rice",
                    rating: 4.4,
                    calories: 650,
                    price_range: "RM 8 - 15",
                    best_locations: ["Line Clear Nasi Kandar", "Hameediyah Restaurant", "Kassim Mustafa"],
                    history: "Originated in the 1920s by Tamil Muslim immigrants who carried rice and curry in baskets suspended from poles ('kandar'). Line Clear was the first famous stall.",
                    facts: "The mixing of different curries creates unique flavor combinations. Each stall has its signature gravy that's been perfected over generations.",
                    culture: "More than just food - it's a cultural institution. Customers from all backgrounds gather here, especially late at night, creating Penang's famous multicultural dining experience."
                },
                {
                    id: "penang014",
                    name: "Ice Kacang",
                    image: "images/Penang-Ice-Kacang.jpeg",
                    description: "Colorful shaved ice dessert with various toppings like red beans, corn, jelly, and syrups.",
                    ingredients: ["Shaved ice", "Red beans", "Sweet corn", "Grass jelly", "Agar-agar", "Rose syrup", "Sarsi syrup", "Condensed milk", "Evaporated milk"],
                    category: "desserts",
                    rating: 4.0,
                    calories: 200,
                    price_range: "RM 3 - 6",
                    best_locations: ["Gurney Drive", "New Lane", "Esplanade Food Centre"],
                    history: "Evolved from the Chinese tradition of serving shaved ice desserts, but adapted with local ingredients like red beans and tropical syrups in the 1940s.",
                    facts: "Each vendor creates their own rainbow pattern with colored syrups. The name 'kacang' means beans in Malay, referring to the red beans topping.",
                    culture: "A cooling dessert perfect for Penang's tropical climate. Often shared among friends and family, representing the communal nature of Malaysian food culture."
                },
                {
                    id: "penang015",
                    name: "Teh Tarik",
                    image: "images/Penang-Teh-Tarik.jpg",
                    description: "Malaysia's national drink - frothy pulled tea with condensed milk. Perfectly paired with any Penang meal.",
                    ingredients: ["Black tea", "Condensed milk", "Evaporated milk", "Sugar"],
                    category: "drinks",
                    rating: 4.2,
                    calories: 150,
                    price_range: "RM 1.50 - 3",
                    best_locations: ["Any mamak stall", "Coffee shops", "Street vendors"],
                    history: "Introduced by Indian Muslim immigrants in the 1950s. The 'pulling' technique was developed to cool the tea and create the signature frothy top.",
                    facts: "The pulling motion can reach over 3 feet in height. The skill is passed down through generations, and some vendors can pull multiple cups simultaneously.",
                    culture: "More than a drink - it's a social ritual. People gather at mamak stalls to 'lepak' (hang out), discuss everything from politics to football over teh tarik."
                },
                {
                    id: "penang016",
                    name: "Nutmeg Juice",
                    image: "images/Penang-Nutmeg-Juice.jpg",
                    description: "Unique Penang drink made from nutmeg fruit. Sweet, refreshing, and locally sourced.",
                    ingredients: ["Fresh nutmeg fruit", "Sugar", "Ice", "Water"],
                    category: "drinks",
                    rating: 3.8,
                    calories: 80,
                    price_range: "RM 2 - 4",
                    best_locations: ["Tropical Spice Garden", "Balik Pulau", "Local fruit stalls"],
                    history: "Nutmeg was introduced to Penang by the British in the 1800s as a commercial crop. Local communities discovered the fruit makes excellent juice.",
                    facts: "Penang was once the world's largest nutmeg producer. The juice is made from the fruit flesh, while the valuable spice comes from the seed inside.",
                    culture: "Represents Penang's agricultural heritage. Locals in Balik Pulau have been making this juice for generations, and it's a symbol of countryside hospitality."
                },
                {
                    id: "penang017",
                    name: "Mee Udang (Prawn Mee)",
                    image: "images/Penang-Mee-Udang.jpg",
                    description: "Rich prawn noodle soup from Balik Pulau, famous for its sweet prawn broth and fresh ingredients.",
                    ingredients: ["Fresh prawns", "Yellow noodles", "Rice vermicelli", "Bean sprouts", "Water spinach", "Hard-boiled eggs", "Fried shallots"],
                    category: "noodles",
                    rating: 4.5,
                    calories: 400,
                    price_range: "RM 8 - 12",
                    best_locations: ["Balik Pulau", "Mee Udang Mak Jah", "Titi Teras"],
                    history: "Originated in the fishing villages of Balik Pulau in the 1980s when local fishermen created this dish using their fresh catch of prawns.",
                    facts: "The broth is made by boiling prawn shells for hours. Some stalls use only tiger prawns caught from Penang waters, making each bowl exceptionally sweet.",
                    culture: "Represents the fishing community's ingenuity in creating gourmet food from simple ingredients. Often enjoyed by families during weekend trips to the countryside."
                },
                {
                    id: "penang018",
                    name: "Durian Cendol",
                    image: "images/Penang-Durian-Cendol.jpg",
                    description: "Premium version of cendol topped with fresh durian flesh. A seasonal treat for durian lovers.",
                    ingredients: ["Green rice flour jelly", "Fresh coconut milk", "Gula melaka", "Shaved ice", "Fresh durian flesh"],
                    category: "desserts",
                    rating: 4.3,
                    calories: 300,
                    price_range: "RM 5 - 8",
                    best_locations: ["Penang Road Famous Cendol", "Seasonal stalls", "Durian orchards"],
                    history: "Created in the 1990s when cendol vendors began adding fresh durian during durian season (June-August) to attract more customers.",
                    facts: "Only available during durian season. The best versions use D24 or Musang King durian varieties. Some vendors freeze durian to extend availability.",
                    culture: "Represents the 'King of Fruits' obsession in Malaysia. Durian lovers will travel across the island just to find the best durian cendol during peak season."
                }
            ];
        }

        // Save food data to localStorage for the details page
        function saveFoodData(foodId) {
            const food = allFoods.find(f => f.id === foodId);
            if (food) {
                localStorage.setItem('selectedFood', JSON.stringify(food));
                localStorage.setItem('allFoods', JSON.stringify(allFoods));
                window.location.href = 'food_details.html';
            }
        }

        $(document).ready(function () {
            initializePage();
            loadWeatherData();

            // Event handlers
            $('#search-btn').click(performSearch);
            $('#search-input').keypress(function (e) {
                if (e.which === 13) performSearch();
            });

            // Clear search button
            $('#clear-search-btn').click(function () {
                $('#search-input').val('');
                $('#sort-select').val('default');
                $('.category-btn').removeClass('active');
                $('.category-btn[data-category="all"]').addClass('active');
                currentCategory = 'all';
                displayedFoods = [...allFoods];
                displayFoods(displayedFoods);
            });

            $('.category-btn').click(function () {
                $('.category-btn').removeClass('active');
                $(this).addClass('active');
                currentCategory = $(this).data('category');
                filterByCategory(currentCategory);
            });

            $('#sort-select').change(function () {
                sortFoods($(this).val());
            });
        });

        async function initializePage() {
            showLoading(true);

            // Load Penang foods
            allFoods = await loadPenangFoods();
            displayedFoods = [...allFoods];
            displayFoods(displayedFoods);

            showLoading(false);
        }

        function performSearch() {
            const searchTerm = $('#search-input').val().trim().toLowerCase();
            if (!searchTerm) {
                displayedFoods = [...allFoods];
                displayFoods(displayedFoods);
                return;
            }

            // Search in local foods
            const searchResults = allFoods.filter(food =>
                food.name.toLowerCase().includes(searchTerm) ||
                food.description.toLowerCase().includes(searchTerm) ||
                food.ingredients.some(ing => ing.toLowerCase().includes(searchTerm)) ||
                food.category.toLowerCase().includes(searchTerm)
            );

            displayedFoods = searchResults;
            displayFoods(displayedFoods);
        }

        function filterByCategory(category) {
            if (category === 'all') {
                displayedFoods = [...allFoods];
            } else {
                displayedFoods = allFoods.filter(food => food.category === category);
            }
            displayFoods(displayedFoods);
        }

        function sortFoods(sortType) {
            if (!displayedFoods.length) return;

            let sortedFoods = [...displayedFoods];

            switch (sortType) {
                case 'name-asc':
                    sortedFoods.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'name-desc':
                    sortedFoods.sort((a, b) => b.name.localeCompare(a.name));
                    break;
                case 'rating-desc':
                    sortedFoods.sort((a, b) => b.rating - a.rating);
                    break;
                case 'rating-asc':
                    sortedFoods.sort((a, b) => a.rating - b.rating);
                    break;
                default:
                    return;
            }

            displayedFoods = sortedFoods;
            displayFoods(displayedFoods);
        }

        function displayFoods(foods) {
            const container = $('#foods-container');
            container.empty();

            if (foods.length === 0) {
                $('#no-results').show();
                return;
            }

            $('#no-results').hide();

            foods.forEach(food => {
                const ratingStars = generateRatingStars(food.rating);

                const foodCard = `
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="card h-100 shadow-sm food-card" data-food-id="${food.id}">
                                <div class="position-relative">
                                    <img src="${food.image}" class="card-img-top" alt="${food.name}"
                                         style="height: 200px; object-fit: cover;"
                                         onerror="this.src='https://via.placeholder.com/300x200?text=Penang+Food'">
                                    <div class="position-absolute top-0 start-0 m-2">
                                        <span class="badge bg-success">Penang Authentic</span>
                                    </div>
                                    <div class="position-absolute top-0 end-0 m-2">
                                        <span class="badge bg-dark">‚≠ê ${food.rating}</span>
                                    </div>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title">${food.name}</h5>
                                    <p class="card-text flex-grow-1">${food.description.substring(0, 120)}...</p>
                                    <div class="mt-auto">
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <div class="rating">
                                                ${ratingStars}
                                                <small class="text-muted ms-1">(${food.rating})</small>
                                            </div>

                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <span class="badge bg-warning text-dark">${food.category}</span>
                                            <small class="text-muted">${food.calories} cal</small>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <small class="text-success fw-bold">${food.price_range}</small>
                                            <small class="text-muted">üìç Penang</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <button class="btn btn-success w-100 view-details-btn" data-food-id="${food.id}">
                                        <i class="bi bi-eye me-2"></i>View Details
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                container.append(foodCard);
            });

            // Add click handlers
            $('.view-details-btn').click(function () {
                const foodId = $(this).data('food-id');
                saveFoodData(foodId);
            });
        }

        // Utility functions
        function generateRatingStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);

            return '‚òÖ'.repeat(fullStars) +
                (hasHalfStar ? '‚òÜ' : '') +
                '‚òÜ'.repeat(emptyStars);
        }

        function showLoading(show) {
            if (show) {
                $('#loading').show();
                $('#foods-container').hide();
            } else {
                $('#loading').hide();
                $('#foods-container').show();
            }
        }

        // Weather API Integration - Using jQuery AJAX
        function loadWeatherData() {
            // Using jQuery.ajax() for RESTful API call
            $.ajax({
                url: 'https://api.open-meteo.com/v1/forecast',
                method: 'GET', // RESTful GET method
                data: {
                    latitude: 5.4164,
                    longitude: 100.3327,
                    current_weather: true,
                    hourly: 'temperature_2m,relative_humidity_2m',
                    timezone: 'Asia/Kuala_Lumpur'
                },
                dataType: 'json',
                timeout: 10000, // 10 second timeout
                success: function (data) {
                    console.log('Weather API Success:', data);
                    displayWeatherData(data);
                },
                error: function (xhr, status, error) {
                    console.log('Weather API Error:', status, error);
                    displayFallbackWeather();
                },
                beforeSend: function () {
                    // Show loading state
                    $('#weather-widget .card-body').append('<div class="spinner-border spinner-border-sm me-2" id="weather-spinner"></div>');
                },
                complete: function () {
                    // Remove loading spinner
                    $('#weather-spinner').remove();
                }
            });
        }

        // Alternative jQuery methods for different RESTful operations
        function loadWeatherDataAlternative() {
            // Using jQuery.get() - shorthand for GET requests
            $.get({
                url: 'https://api.open-meteo.com/v1/forecast',
                data: {
                    latitude: 5.4164,
                    longitude: 100.3327,
                    current_weather: true,
                    hourly: 'temperature_2m,relative_humidity_2m',
                    timezone: 'Asia/Kuala_Lumpur'
                },
                dataType: 'json'
            })
                .done(function (data) {
                    console.log('Weather data loaded successfully');
                    displayWeatherData(data);
                })
                .fail(function (xhr, status, error) {
                    console.log('Failed to load weather data:', error);
                    displayFallbackWeather();
                })
                .always(function () {
                    console.log('Weather API request completed');
                });
        }

        // RESTful API call using jQuery.getJSON()
        function loadWeatherWithGetJSON() {
            const apiUrl = 'https://api.open-meteo.com/v1/forecast?' + $.param({
                latitude: 5.4164,
                longitude: 100.3327,
                current_weather: true,
                hourly: 'temperature_2m,relative_humidity_2m',
                timezone: 'Asia/Kuala_Lumpur'
            });

            $.getJSON(apiUrl)
                .done(function (data) {
                    displayWeatherData(data);
                })
                .fail(function () {
                    displayFallbackWeather();
                });
        }

        function displayWeatherData(data) {
            const temp = Math.round(data.current_weather.temperature);
            const weatherCode = data.current_weather.weathercode;

            // Map weather codes to descriptions and icons
            const weatherInfo = getWeatherInfo(weatherCode);

            $('#weather-temp').text(`${temp}¬∞C`);
            $('#weather-desc').text(weatherInfo.description);
            $('#weather-icon').attr('src', weatherInfo.icon);
            $('#weather-feels').text(temp); // Simplified for demo
            $('#weather-humidity').text(data.hourly.relative_humidity_2m[0] || 70);

            // Show food recommendation based on weather
            showFoodRecommendation(temp, weatherCode);

            $('#weather-widget').fadeIn();
        }

        function displayFallbackWeather() {
            // Show typical Penang weather as fallback
            $('#weather-temp').text('32¬∞C');
            $('#weather-desc').text('Partly Cloudy');
            $('#weather-icon').attr('src', 'https://openweathermap.org/img/w/02d.png');
            $('#weather-feels').text('36');
            $('#weather-humidity').text('75');

            showFoodRecommendation(32, 2); // Partly cloudy
            $('#weather-widget').fadeIn();
        }

        function getWeatherInfo(weatherCode) {
            const weatherMap = {
                0: { description: 'Clear Sky', icon: 'https://openweathermap.org/img/w/01d.png' },
                1: { description: 'Mainly Clear', icon: 'https://openweathermap.org/img/w/01d.png' },
                2: { description: 'Partly Cloudy', icon: 'https://openweathermap.org/img/w/02d.png' },
                3: { description: 'Overcast', icon: 'https://openweathermap.org/img/w/03d.png' },
                45: { description: 'Foggy', icon: 'https://openweathermap.org/img/w/50d.png' },
                48: { description: 'Depositing Rime Fog', icon: 'https://openweathermap.org/img/w/50d.png' },
                51: { description: 'Light Drizzle', icon: 'https://openweathermap.org/img/w/09d.png' },
                61: { description: 'Slight Rain', icon: 'https://openweathermap.org/img/w/10d.png' },
                63: { description: 'Moderate Rain', icon: 'https://openweathermap.org/img/w/10d.png' },
                65: { description: 'Heavy Rain', icon: 'https://openweathermap.org/img/w/10d.png' },
                80: { description: 'Rain Showers', icon: 'https://openweathermap.org/img/w/09d.png' },
                95: { description: 'Thunderstorm', icon: 'https://openweathermap.org/img/w/11d.png' }
            };

            return weatherMap[weatherCode] || { description: 'Unknown', icon: 'https://openweathermap.org/img/w/02d.png' };
        }

        function showFoodRecommendation(temp, weatherCode) {
            let suggestion = '';

            if (temp > 30) {
                // Hot weather - recommend cooling foods
                const coolingFoods = ['Penang Cendol', 'Ice Kacang', 'Nutmeg Juice', 'Durian Cendol'];
                suggestion = `Perfect weather for cooling ${coolingFoods[Math.floor(Math.random() * coolingFoods.length)]}! ‚ùÑÔ∏è`;
            } else if (weatherCode >= 61 && weatherCode <= 95) {
                // Rainy weather - recommend warm foods
                const warmFoods = ['Penang Asam Laksa', 'Hokkien Mee', 'Curry Mee', 'Teh Tarik'];
                suggestion = `Rainy day calls for warm ${warmFoods[Math.floor(Math.random() * warmFoods.length)]}! ‚òî`;
            } else if (temp < 28) {
                // Cooler weather - recommend any hot food
                const hotFoods = ['Char Kway Teow', 'Nasi Kandar', 'Mee Goreng Mamak'];
                suggestion = `Great weather to enjoy ${hotFoods[Math.floor(Math.random() * hotFoods.length)]}! üçú`;
            } else {
                // Perfect weather - recommend popular foods
                const popularFoods = ['Penang Asam Laksa', 'Char Kway Teow', 'Penang Rojak'];
                suggestion = `Perfect weather to try ${popularFoods[Math.floor(Math.random() * popularFoods.length)]}! üåü`;
            }

            $('#food-suggestion').text(suggestion);
            $('#weather-recommendation').show();
        }

        // Custom CSS for enhanced styling
        $('<style>')
            .prop('type', 'text/css')
            .html(`
                    .food-card {
                        transition: transform 0.3s ease, box-shadow 0.3s ease;
                        cursor: pointer;
                    }
                    .food-card:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
                    }
                    .rating {
                        color: #ffc107;
                    }
                    .category-btn {
                        margin: 2px;
                        transition: all 0.3s ease;
                    }
                    .category-btn.active {
                        background-color: #39765f;
                        border-color: #39765f;
                        color: white;
                    }
                    @media (max-width: 768px) {
                        .btn-group {
                            flex-direction: column;
                            width: 100%;
                        }
                        .btn-group .btn {
                            margin-bottom: 5px;
                        }
                    }
                `)
            .appendTo('head');
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const navAuthSection = document.getElementById('nav-auth-section');

            const getUsers = () => JSON.parse(localStorage.getItem('users')) || [];
            const getLoggedInUser = () => localStorage.getItem('loggedInUser');

            const updateNavbar = () => {
                const loggedInUsername = getLoggedInUser();
                navAuthSection.innerHTML = '';

                if (loggedInUsername) {

                    const users = getUsers();
                    const user = users.find(u => u.username === loggedInUsername);
                    const displayName = user ? (user.nickname || user.username) : loggedInUsername;
                    const avatarSrc = user ? user.avatar : 'images/user-logo.png';

                    navAuthSection.innerHTML = `
                            <li class="nav-item">
                                <a id="nav-profile-link" class="nav-link d-flex align-items-center" href="account.html" title="View Profile">
                                    ${displayName.toUpperCase()}
                                    <img src="${avatarSrc}" alt="User Avatar" class="ms-2" height="35" width="35" style="border-radius: 50%; object-fit: cover;">
                                </a>
                            </li>
                        `;
                } else {

                    navAuthSection.innerHTML = `
                            <li class="nav-item">
                                <a id="nav-signin-link" class="account nav-link" href="account.html">
                                    SIGN IN <img class="user-icon" src="images/user-logo.png" height="35" width="35">
                                </a>
                            </li>
                        `;
                }
            };

            // update navbat
            updateNavbar();
        });
    </script>

</body>
</html>